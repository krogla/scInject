!function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"g",function(){return s}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"d",function(){return c}),n.d(e,"j",function(){return a}),n.d(e,"a",function(){return u}),n.d(e,"i",function(){return d}),n.d(e,"h",function(){return l}),n.d(e,"b",function(){return y});const r="error",s="pushScatter",i="getOrRequestIdentity",o="identityFromPermissions",c="forgetIdentity",a="requestSignature",u="abiCache",d="requestArbitrarySignature",l="requestAddNetwork",y="authenticate"},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return s});const r="injected",s="scatter"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{static rand(){return Math.random()}static text(t){let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<t;s++)e+=n.charAt(Math.floor(r.rand()*n.length));return e}static numeric(t){let e=11;if(t>e)return r.numeric(e)+r.numeric(t-e);const n=(e=Math.pow(10,t+1))/10;return(""+(Math.floor(r.rand()*(e-n+1))+n)).substring(1)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0);class s{constructor(t="",e={},n="",r=""){this.type=t,this.payload=e,this.resolver=n,this.domain=r}static placeholder(){return new s}static fromJson(t){return Object.assign(this.placeholder(),t)}static payload(t,e){const n=this.placeholder();return n.type=t,n.payload=e,n}static signal(t){const e=this.placeholder();return e.type=t,e}respond(t){return new s(this.type,t,this.resolver)}error(t){return new s(r.c,t,this.resolver)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=()=>{let t=location.hostname;return 0===t.indexOf("www.")&&(t=t.replace("www.","")),t}},function(t,e,n){"use strict";const r="malicious",s="locked",i="prompt_closed";n.d(e,"a",function(){return c});const o={NO_SIGNATURE:402,FORBIDDEN:403,TIMED_OUT:408,LOCKED:423,UPGRADE_REQUIRED:426,TOO_MANY_REQUESTS:429};class c{constructor(t,e,n=o.LOCKED){this.type=t,this.message=e,this.code=n,this.isError=!0}static locked(){return new c(s,"The user's Scatter is locked. They have been notified and should unlock before continuing.")}static promptClosedWithoutAction(){return new c(i,"The user closed the prompt without any action.",o.TIMED_OUT)}static maliciousEvent(){return new c(r,"Malicious event discarded.",o.FORBIDDEN)}static signatureError(t,e){return new c(t,e,o.NO_SIGNATURE)}static identityMissing(){return this.signatureError("identity_missing","Identity no longer exists on the user's keychain")}static signatureAccountMissing(){return this.signatureError("account_missing","Missing required accounts, repull the identity")}static malformedRequiredFields(){return this.signatureError("malformed_requirements","The requiredFields you passed in were malformed")}static noNetwork(){return this.signatureError("no_network","You must bind a network first")}static usedKeyProvider(){return new c(r,"Do not use a `keyProvider` with a Scatter. Use a `signProvider` and return only signatures to this object. A malicious person could retrieve your keys otherwise.",o.NO_SIGNATURE)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r={encrypt:(t,e)=>t,decrypt:(t,e)=>t};class s{constructor(t,e){this.eventName=t,this.key=e,this.synced=!1,this.syncFn=null,this.listenForSync()}listenWith(t){document.addEventListener(this.eventName,e=>{if(!this.synced)return!1;let n=JSON.parse(e.detail);n=this.synced&&"string"==typeof n?r.decrypt(n,this.key):n,t(n)})}send(t,e){if("object"!=typeof t)throw new Error("Payloads must be objects");(()=>{t.from=this.eventName})(),(()=>{t=this.synced?r.encrypt(t,this.key):t})(),this.dispatch(JSON.stringify(t),e)}onSync(t){this.syncFn=t}sync(t,e){this.send({type:"sync",handshake:e},t)}listenForSync(){document.addEventListener(this.eventName,t=>{let e=JSON.parse(t.detail);if(!e.hasOwnProperty("type"))return!1;"sync"===e.type&&this.ackSync(e),"synced"===e.type&&(this.synced=!0)})}ackSync(t){this.send({type:"synced"},t.from),this.key=t.handshake,this.synced=!0,this.syncFn()}dispatch(t,e){document.dispatchEvent(this.getEvent(t,e))}getEvent(t,e){return new CustomEvent(e,this.getEventInit(t))}getEventInit(t){return{detail:t}}}e.EncryptedStream=s,e.default=s},function(t,e,n){"use strict";n.r(e);var r=n(6),s=n(2),i=n(1),o=n(0),c=n(3),a=n(4),u=n(5);let d=new WeakMap,l=!1;const y=new class{constructor(t=null){(d=new r.EncryptedStream(i.b,s.a.text(256))).listenWith(t=>this.msgListener(t)),d.onSync(async()=>{d.send(c.a.payload(o.g,{version:"11.11.11",identity:t}),i.a),l=!0,document.dispatchEvent(new CustomEvent("scatterLoaded"))})}msgListener(t){if(!l)return;if(!t)return;t.domain=Object(a.a)(),t.hasOwnProperty("payload")&&(t.payload.domain=Object(a.a)());const e=c.a.fromJson(t);if(d.synced||t.hasOwnProperty("type")&&"sync"===t.type)switch(console.log("send to ios",e),t.type){case o.f:case o.e:case o.d:case o.j:case o.i:case o.h:case o.b:case o.a:window.webkit.messageHandlers.scatterHandler.postMessage(JSON.stringify(e));break;default:d.send(e.error(u.a.maliciousEvent()),i.a)}else d.send(e.error(u.a.maliciousEvent()),i.a)}sync(t){d.key=t.handshake.length?t.handshake:null,d.send({type:"sync"},i.a),d.synced=!0}msgResponder(t,e){if(!l)return;t=c.a.fromJson(t);const n=!e||e.hasOwnProperty("isError")?t.error(e):t.respond(e);d.send(n,i.a)}};"undefined"!=typeof window&&(window.scatterHandler=y)}]);